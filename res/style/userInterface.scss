@import "variables.scss";

@keyframes ui-expand {
    0% {
        left: calc(-1 * $ui-width);
    }
    70% {
        left: -1rem;
    }
    75%, 100% {
        left: 0;
    }
}

@keyframes ui-collapse {
    0%, 25% {
        left: 0;
    }
    95% {
        left: calc(1rem - $ui-width);
    }
    100% {
        left: calc(-1 * $ui-width);
    }
}

@keyframes node-expand {
    0%, 25% {
        scale: 0.9;
        box-shadow: 0 0 10px $background inset;
    }
    100% {
        scale: 1;
        box-shadow: 0 0 10px $background;
    }
}

@keyframes node-collapse {
    0% {
        scale: 1;
        box-shadow: 0 0 10px $background;
    }
    75%, 100% {
        scale: 0.9;
        box-shadow: 0 0 10px $background inset;
    }
}

#user-interface {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    row-gap: 1rem;

    background: $drawer-foreground;

    position: absolute;
    width: calc($ui-width - 1rem);
    height: calc(100% - 2rem);
    left: calc(-1 * $ui-width);

    padding: 2rem 1rem;
    top: -1rem;
    animation: ui-collapse 0.5s ease-out;

    border-radius: 0 $interface-radius $interface-radius 0;
    box-shadow: 5px 0 13px -3px #000;

    #selection .node {
        animation: node-collapse 0.5s;
    }

    &.expanded {
        animation: ui-expand 0.5s;
        left: 0;

        #selection .node {
            animation: node-expand 0.5s;
        }
    }

    #header {
        width: 100%;
        height: 4rem;

        background: $drawer-background;
        border-radius: $interface-radius;
        box-shadow: 0 0 15px #000 inset;
    }

    #selection {
        display: flex;
        flex-direction: column;
        gap: 1.25rem;

        width: 100%;
        height: calc(100% - 5rem);

        background: $drawer-background;
        border-radius: $interface-radius;
        box-shadow: 0 0 15px #000 inset;

        overflow-y: auto;
        overflow-x: hidden;

        &::-webkit-scrollbar {
            width: 1.25rem;
            background: $scrollbar-background;
            border-radius: 0 $interface-radius $interface-radius 0;

            box-shadow: 0 0 10px #222 inset;
        }

        &::-webkit-scrollbar-thumb {
            background: $scrollbar-foreground;
            border-radius: $interface-radius;

            box-shadow: 0 0 5px #222 inset;

            &:hover {
                background: $scrollbar-hover;
                cursor: pointer;
            }
        }

        .holder {
            position: relative;

            &:first-child {
                margin-top: 1.25rem;
            }

            &:last-child {
                margin-bottom: 1.25rem;
            }

            &::before, &:last-child::after {
                content: " ";
                position: absolute;
                top: -0.675rem;
                width: 100%;
                height: 5px;
                background: $scrollbar-background;
                box-shadow: 0 0 10px $background inset;
            }

            &:last-child::after {
                top: auto;
                bottom: -0.675rem;
            }

            .node {
                position: relative;

                width: 80%;
                min-height: 4rem;
                background: $node-color;

                border-radius: $node-radius;
                margin: 0 auto 0 auto;

                box-shadow: 0 0 10px $background;

                &::before, &::after {
                    content: " ";
                    position: absolute;

                    top: 0;

                    width: 1rem;
                    height: 100%;

                    background: $background;
                }

                &::before {
                    left: 0;

                    border-radius: $node-radius 0 0 $node-radius;
                }

                &::after {
                    right: 0;

                    border-radius: 0 $node-radius $node-radius 0;
                }

                .name {
                    position: absolute;

                    width: calc(100% - 1rem);
                    border-top-left-radius: $node-radius;
                    user-select: none;

                    background: #555;
                    text-align: center;

                    text-transform: uppercase;
                    color: $node-text-color;
                    font-size: 1.2rem;
                    font-family: Arial, Helvetica, sans-serif;

                    &::before {
                        content: " ";
                    }
                }
            }
        }
    }

    #visuals {
        #drawer-handle {
            position: absolute;
            top: 50%;
            transform: translate(calc(0.5rem - 2px), -50%);

            fill: $drawer-foreground;
            width: 3rem;

            padding: 0.5rem;
            cursor: pointer;
            user-select: none;

            filter: drop-shadow(7px 2px 4px rgba(0, 0, 0, .7));
        }
    }
}